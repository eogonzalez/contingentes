<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Dashboard</title>
  <!--<link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/bootstrap.css" rel="stylesheet">-->

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  <link href="css/datepicker3.css" rel="stylesheet">
  <link href="css/styles.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
  <!-- fullCalendar 2.2.5-->
  <link rel="stylesheet" href="css/fullcalendar/fullcalendar.min.css">
  <link rel="stylesheet" href="css/fullcalendar/fullcalendar.print.css" media="print">
  <!-- Theme style -->
  <link rel="stylesheet" href="css/AdminLTE.min.css">
  <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
  <link rel="stylesheet" href="AdminLTE/dist/css/skins/_all-skins.min.css">

  <!--Icons-->
  <script src="js/lumino.glyphs.js"></script>
  <style type="text/css">
    .contenido{
      display: hide
    }
  </style>

</head>

<body>

  <!--Barra Navegacion-->
  <!--<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#sidebar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#"><span>Trazabilidad</span>DACE</a>
        <ul class="user-menu">
          <li class="dropdown pull-right">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown"><svg class="glyph stroked male-user"><use xlink:href="#stroked-male-user"></use></svg> User <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="#"><svg class="glyph stroked male-user"><use xlink:href="#stroked-male-user"></use></svg> Profile</a></li>
              <li><a href="#"><svg class="glyph stroked gear"><use xlink:href="#stroked-gear"></use></svg> Settings</a></li>
              <li><a href="#"><svg class="glyph stroked cancel"><use xlink:href="#stroked-cancel"></use></svg> Logout</a></li>
            </ul>
          </li>
        </ul>
      </div>
              
    </div>
  </nav>-->

  <!--Barra Herramientas-->
  <div id="sidebar-collapse" class="col-sm-3 col-lg-2 sidebar">

    <form role="search">
      <div class="form-group">
        <input type="text" class="form-control" placeholder="Search">
      </div>
    </form>

    <ul class="nav menu">

      <!-- Menu Alertas -->
      <li class="parent">
        <a href="calendar.html">
          <span data-toggle="collapse" href="#subItemGrupo"><svg class='glyph stroked calendar'><use xlink:href="#stroked-calendar"></use></svg></span> Alertas
        </a>

        <ul class="children collapse" id="subItemGrupo">
          <li>
            <a href="grupos.html" >
              <svg class="glyph stroked chevron-right"><use xlink:href="#stroked-chevron-right"></use></svg>
              Grupos
            </a>
          </li>
          <li>
            <a href="contactos.html">
              <svg class="glyph stroked chevron-right"><use xlink:href="#stroked-chevron-right"></use></svg>
              Contactos
            </a>
          </li>
          <li>
            <a href="contactos_contingentes.html">
              <svg class="glyph stroked chevron-right"><use xlink:href="#stroked-chevron-right"></use></svg>
              Contactos Contingentes
            </a>
          </li>
          <li>
            <a href="grupocontactos.html">
              <svg class="glyph stroked chevron-right"><use xlink:href="#stroked-chevron-right"></use></svg>
              Relacion Contacto - Grupo
            </a>
          </li>
        </ul>
      </li>

      <li role="presentation" class="divider"></li>

      <!-- Menu Contingentes -->
      <li class="parent ">
        <a href="#">
          <span data-toggle="collapse" href="#sub-item-contingentesPro"><svg class="glyph stroked chevron-down"><use xlink:href="#stroked-chevron-down"></use></svg></span>Contingentes
        </a>
        <ul class="children collapse" id="sub-item-contingentesPro">

          <li>
            <a href="index.html">
              <span data-toggle="collapse" href="#sub-item-1"><svg class="glyph stroked dashboard-dial"><use xlink:href="#stroked-dashboard-dial"></use></svg></span> Tablero 
            </a>
            <ul class="children collapse" id="sub-item-1">
              <li>
                <a href="indicadores.html">
                  <svg class="glyph stroked chevron-right"><use xlink:href="#stroked-chevron-right"></use></svg> Indicadores Contingentes
                </a>
              </li>
            </ul>
          </li>


          <li>
            <a href="procesoContingentes.html">
              <span data-toggle="collapse" href="#sub-item-contingentes"><svg class="glyph stroked chevron-down"><use xlink:href="#stroked-chevron-down"></use></svg></span> Proceso Contingentes
            </a>
            <ul class="children collapse" id="sub-item-contingentes">
              <li>
                <a class="" href="#">
                  <svg class="glyph stroked chevron-right"><use xlink:href="#stroked-chevron-right"></use></svg> 1. Inscripción
                </a>
              </li>
              <li>
                <a class="" href="#">
                  <svg class="glyph stroked chevron-right"><use xlink:href="#stroked-chevron-right"></use></svg> 2. Asignación
                </a>
              </li>
              <li>
                <a class="" href="#">
                  <svg class="glyph stroked chevron-right"><use xlink:href="#stroked-chevron-right"></use></svg> 3. Emisión
                </a>
              </li>
            </ul>
          </li>

          <li><a href="reportes.html"><svg class="glyph stroked table"><use xlink:href="#stroked-table"></use></svg> Reportes </a></li>
        </ul>
      </li>
      
      <li role="presentation" class="divider"></li>

      <!-- Menu Unidad Origen -->
      <li class="parent">
        <a href="#">
          <span data-toggle="collapse" href="#SubItemOrigenPro"><svg class="glyph stroked chevron-down"><use xlink:href="#stroked-chevron-down"></use></svg></span>Unidad Origen
        </a>
        <ul class="children collapse" id="SubItemOrigenPro">
          <li>
            <a class="" href="#">
              <svg class="glyph stroked chevron-right"><use xlink:href="#stroked-chevron-right"></use></svg> Ingreso de Expediente
            </a>
          </li>
          <li>
            <a class="" href="#">
              <svg class="glyph stroked chevron-right"><use xlink:href="#stroked-chevron-right"></use></svg> Resolucion Inicial
            </a>
          </li>
        </ul>
      </li>

      <li role="presentation" class="divider"></li>

      <!-- Menu Unidad Defensa Comercial -->
      <li class="parent">
        <a href="#">
          <span data-toggle="collapse" href="#SubItemDefensaPro"><svg class="glyph stroked chevron-down"><use xlink:href="#stroked-chevron-down"></use></svg></span>Defensa Comercial
        </a>
        <ul class="children collapse" id="SubItemDefensaPro">

          <li>
            <a href="defensa/actividades.html">
              <span data-toggle="collapse" href="#subItemDefensaActi"><svg class="glyph stroked chevron-down"><use xlink:href="#stroked-chevron-down"></use></svg></span> Agregar Actividad
            </a>
            <ul class="children collapse" id="subItemDefensaActi">
              <li>
                <a class="" href="defensa/temas.html">
                  <svg class="glyph stroked chevron-right"><use xlink:href="#stroked-chevron-right"></use></svg> Temas
                </a>
              </li>
              <li>
                <a class="" href="defensa/tipoActividad.html">
                  <svg class="glyph stroked chevron-right"><use xlink:href="#stroked-chevron-right"></use></svg> Tipo Actividad
                </a>
              </li>
            </ul>
          </li>

          <li>
            <a class="" href="#">
              <svg class="glyph stroked chevron-right"><use xlink:href="#stroked-chevron-right"></use></svg> Tablero Indicadores
            </a>
          </li>
        </ul>
      </li>

      <li role="presentation" class="divider"></li>
      <li><a href="login.html"><svg class="glyph stroked male-user"><use xlink:href="#stroked-male-user"></use></svg> Login Page</a></li>
    </ul>
  </div>
  
  <!-- Content Wrapper. Contains page content -->
  
  <div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2 main">

    
        <!-- Content Header (Page header) -->
        <section class="content-header">
          <h1>
            Calendario de Alertas
            <small>Panel de Control</small>
          </h1>
          <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i> Inicio </a></li>
            <li class="active">Calendario</li>
          </ol>
        </section>

        <!-- Main content -->
        <section class="content">
          <div class="row">
            <div class="col-md-3">
              <div class="box box-solid">
                <div class="box-header with-border">
                  <h4 class="box-title">Tipos de Eventos</h4>
                </div>
                <div class="box-body">
                  <!-- the events -->
                  <div id="external-events">
                    <!--
                    <div class="external-event bg-green">Lunch</div>
                    <div class="external-event bg-yellow">Go home</div>
                    <div class="external-event bg-aqua">Do homework</div>
                    <div class="external-event bg-light-blue">Work on UI design</div>
                    <div class="external-event bg-red">Sleep tight</div>
                    -->
                    <div class="checkbox">
                      <label for="drop-remove">
                        <input type="checkbox" id="drop-remove">
                        Remover de la lista despues de soltar en Calendario
                      </label>
                    </div>
                  </div>
                </div>
                <!-- /.box-body -->
              </div>
              <!-- /. box -->
              <div class="box box-solid">
                <div class="box-header with-border">
                  <h3 class="box-title">Crear Evento</h3>
                </div>
                <div class="box-body">
                  <div class="btn-group" style="width: 100%; margin-bottom: 10px;">
                    <!--<button type="button" id="color-chooser-btn" class="btn btn-info btn-block dropdown-toggle" data-toggle="dropdown">Color <span class="caret"></span></button>-->
                    <ul class="fc-color-picker" id="color-chooser">
                      <li><a class="text-aqua" href="#"><i class="fa fa-square"></i></a></li>
                      <li><a class="text-blue" href="#"><i class="fa fa-square"></i></a></li>
                      <li><a class="text-light-blue" href="#"><i class="fa fa-square"></i></a></li>
                      <li><a class="text-teal" href="#"><i class="fa fa-square"></i></a></li>
                      <li><a class="text-yellow" href="#"><i class="fa fa-square"></i></a></li>
                      <li><a class="text-orange" href="#"><i class="fa fa-square"></i></a></li>
                      <li><a class="text-green" href="#"><i class="fa fa-square"></i></a></li>
                      <li><a class="text-lime" href="#"><i class="fa fa-square"></i></a></li>
                      <li><a class="text-red" href="#"><i class="fa fa-square"></i></a></li>
                      <li><a class="text-purple" href="#"><i class="fa fa-square"></i></a></li>
                      <li><a class="text-fuchsia" href="#"><i class="fa fa-square"></i></a></li>
                      <li><a class="text-muted" href="#"><i class="fa fa-square"></i></a></li>
                      <li><a class="text-navy" href="#"><i class="fa fa-square"></i></a></li>
                    </ul>
                  </div>
                  <!-- /btn-group -->
                  <div class="input-group">
                    <input id="new-event" type="text" class="form-control" placeholder="Titulo del Evento">

                    <div class="input-group-btn">
                      <button id="add-new-event" type="button" class="btn btn-primary btn-flat">Agregar</button>
                    </div>
                    <!-- /btn-group -->
                  </div>
                  <!-- /input-group -->
                </div>
              </div>
            </div>

            <!-- /.col -->
            <div class="col-md-9">
              <div class="box box-primary">
                <div class="box-body no-padding">
                  <!-- THE CALENDAR -->
                  <div id="calendar"></div>
                </div>
                <!-- /.box-body -->
              </div>
              <!-- /. box -->
            </div>
            <!-- /.col -->

          </div>
          
        </section>
        <!-- /.content -->
    

  </div>

  
  
  <!-- /.content-wrapper -->
    
  <script src="js/jquery-1.11.1.min.js"></script>

  
  <!--<script src="js/chart.min.js"></script>--
  
  <script src="js/easypiechart.js"></script>
  <script src="js/easypiechart-data.js"></script>
  <script src="js/bootstrap-datepicker.js"></script>

  <!-- jQuery UI 1.11.4 -->
  <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>

  <script src="js/bootstrap.js"></script>
  <script src="js/bootstrap-modal.js"></script>

  <!-- Slimscroll -->
  <script src="../plugins/slimScroll/jquery.slimscroll.min.js"></script>
  <!-- FastClick -->
  <script src="js/fastclick/fastclick.js"></script>
  <!-- AdminLTE App -->
  <script src="../dist/js/app.min.js"></script>
  <!-- AdminLTE for demo purposes -->
  <script src="../dist/js/demo.js"></script>
  <!-- fullCalendar 2.2.5 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js"></script>
  <script src="js/fullcalendar/fullcalendar.min.js"></script>
  


  <script type="text/javascript">
    var eventos = new Array();

    $(function () {


        ini_events($('#external-events div.external-event'));

        //Funcion que carga los tipos de eventos almacenados en la DB
        CargaTipoEvento();
        CargaEventosCalendario();



        /* initialize the calendar
         -----------------------------------------------------------------*/
        //Date for the calendar events (dummy data)
        var date = new Date();
        var d = date.getDate(),
            m = date.getMonth(),
            y = date.getFullYear();
        $('#calendar').fullCalendar({
          header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
          },
          buttonText: {
            today: 'today',
            month: 'month',
            week: 'week',
            day: 'day'
          },
          //Random default events
          events: eventos,
          editable: true,
          droppable: true, // this allows things to be dropped onto the calendar !!!
          drop: function (date, allDay) { // this function is called when something is dropped

            // retrieve the dropped element's stored Event Object
            var originalEventObject = $(this).data('eventObject');

            // we need to copy it, so that multiple events don't have a reference to the same object
            var copiedEventObject = $.extend({}, originalEventObject);

            // assign it the date that was reported

            //copiedEventObject.id = $(this).attr('id');
            copiedEventObject.start = date;
            copiedEventObject.allDay = allDay;
            copiedEventObject.backgroundColor = $(this).css("background-color");
            copiedEventObject.borderColor = $(this).css("border-color");

            // render the event on the calendar
            // the last `true` argument determines if the event "sticks" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)
            //var d = new Date;


            //var fechainicia = moment(copiedEventObject.start).format('l');
            var fechainicia = moment(copiedEventObject.start).format('YYYY-MM-DD HH:mm:ss');

            //d = fechainicia.split("/").reverse().join("-")+' '+[d.getHours(), d.getMinutes(), d.getSeconds()].join(':');

            //Llamo almacena evento
            AgregaEvento(copiedEventObject.title,fechainicia, copiedEventObject.backgroundColor, reciboid);

            
            //Funcion que obtiene la variable con los datos que devuelve la funcion
            function reciboid(idevento){
              copiedEventObject.id = idevento.datos;
              $('#calendar').fullCalendar('renderEvent', copiedEventObject, true);
            }

            // is the "remove after drop" checkbox checked?
            if ($('#drop-remove').is(':checked')) {
              // if so, remove the element from the "Draggable Events" list
              var id = $(this).attr('id');

              DeleteTipoEvento(id);

              $(this).remove();
            }

          },
          eventClick: function(calEvent, jsEvent, view){
            
            ModificaEvento(calEvent.id);

          },
          eventDrop: function(event, delta, revertFunc, jsEvent, ui, view){

            
            //Verifica si el evento cabio o sigue siendo de todo el dia
            var todoeldia = '';
            var fechafinaliza = '';
            var fechainicia = event.start.format('YYYY-MM-DD HH:mm:ss');

            //Verifica si es un evento de todo el dia
            if (event.allDay == true) {
              todoeldia = 'S';
              //Si es un evento de todo el dia la hora inicial y final son la misma
              fechafinaliza = fechainicia;
            }else{
              todoeldia = 'N';

              //Verificamos si tiene fecha final
              if (!event.end) {
                //Si aun no tiene se coloca la misma fecha inicial
                fechafinaliza = fechainicia;
              }else{
                //Si tiene fecha final se obtiene y actualiza
                fechafinaliza = event.end.format('YYYY-MM-DD HH:mm:ss');
              }
             
            }

              /*
                view.name = 'month', 'agendaWeek', 'agendaDay'
              */
            
              ActualizaEventoCalendarioDrop(event.id, todoeldia, fechainicia, fechafinaliza);

          },
          eventResize: function( event, delta, revertFunc, jsEvent, ui, view){

            //Verifica si el evento cabio o sigue siendo de todo el dia
            var todoeldia = '';
            var fechafinaliza = '';
            var fechainicia = event.start.format('YYYY-MM-DD HH:mm:ss');

            //Verifica si es un evento de todo el dia
            if (event.allDay == true) {
              todoeldia = 'S';
              //Si es un evento de todo el dia la hora inicial y final son la misma
              fechafinaliza = fechainicia;
            }else{
              todoeldia = 'N';

              //Verificamos si tiene fecha final
              if (!event.end) {
                //Si aun no tiene se coloca la misma fecha inicial
                fechafinaliza = fechainicia;
              }else{
                //Si tiene fecha final se obtiene y actualiza
                fechafinaliza = event.end.format('YYYY-MM-DD HH:mm:ss');
              }
             
            }

            /*
              view.name = 'month', 'agendaWeek', 'agendaDay'
            */
            
            ActualizaEventoCalendarioDrop(event.id, todoeldia, fechainicia, fechafinaliza);

          }
        });

        /* ADDING EVENTS */
        var currColor = "#3c8dbc"; //Red by default
        //Color chooser button
        var colorChooser = $("#color-chooser-btn");
        $("#color-chooser > li > a").click(function (e) {
          e.preventDefault();
          //Save color
          currColor = $(this).css("color");
          //Add color effect to button
          $('#add-new-event').css({"background-color": currColor, "border-color": currColor});
        });


        $("#add-new-event").click(function (e) {
          e.preventDefault();
          //Get value and make sure it is not null
          var val = $("#new-event").val();

          if (val.length == 0) {
            return;
          }

          //Funcion para almacenar el evento en ld DB
          InsertaTipoEvento(val, currColor);

                
          //Create events
          var event = $("<div />");
          event.css({"background-color": currColor, "border-color": currColor, "color": "#fff"}).addClass("external-event");
          event.html(val);
          $('#external-events').prepend(event);

          //Add draggable funtionality
          ini_events(event);

          
          //Remove event from text input
          $("#new-event").val("");

        });
    });

    
        /* initialize the external events
     -----------------------------------------------------------------*/
    function ini_events(ele) {
      ele.each(function () {

        // create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)
        // it doesn't need to have a start or end
        var eventObject = {
          title: $.trim($(this).text()) // use the element's text as the event title
        };

        // store the Event Object in the DOM element so we can get to it later
        $(this).data('eventObject', eventObject);

        // make the event draggable using jQuery UI
        $(this).draggable({
          zIndex: 1070,
          revert: true, // will cause the event to go back to its
          revertDuration: 0  //  original position after the drag
        });

      });
    }

    function CargaTipoEvento(){
      $.ajax({
        url: 'actionsCalendar.php',
        type: 'GET',
        dataType: 'json',
        data: "action=SelectTipoEvento",
        cache:false
      })
      .done(function(response){
        var html = '';

        if (response.result == true) {

          $(response.datos).each(function(i,v){
  
            //Create events
            var event = $("<div />");
            event.css({"background-color": v.color, "border-color": v.color, "color": "#fff"}).addClass("external-event");
            event.html(v.nombre);
            event.attr('id', v.idtipo_evento);
            $('#external-events').prepend(event);

            //Add draggable funtionality
            ini_events(event);

          })

        }else{

          //alert(response.mensaje);
          //html = '<tr><td colspan="6">No se encontraron registros..</td></tr>';
        }


      })
      .fail(function(jqXHR, estado){
        console.log("Ha ocurrido un error al agregar tipos de eventos.");
      })
      .always(function(){
        console.log("Se ejecuta Select tipo de eventos.");
      })
    }

    /*
      Funcion que almacena el tipo de evento en la db
    */
    function InsertaTipoEvento(nombreEvento, color){
    

      $.ajax({
        
        url:'actionsCalendar.php',
        type: 'GET',
        dataType: 'json',
        data: "action=InsertTipoEvento&nombreEvento="+nombreEvento+"&color="+color,
        cache:false
      })
      .done(function(response){

        return true;

      })
      .fail(function(jqXHR, estado){
        console.log("Ha ocurrido un error al insertar tipo de evento.");
      })
      .always(function(){
        console.log("Se ejecuta insertar tipo de evento.");
      })
    }

    /*
      Funcion que es llamada si el tipo de evento tiene eliminar al soltar en el calendario
    */
    function DeleteTipoEvento(idtipo_evento){

      $.ajax({
        url:'actionsCalendar.php',
        type:'GET',
        dataType:'json',
        data:"action=DeleteTipoEvento&idtipo_evento="+idtipo_evento,
        cache:false
      })
      .done(function(response){
        return true;
      })
      .fail(function(jqXHR, estado){
        console.log("Ha ocurrido un error al insertar tipo de evento.");

      })
      .always(function(){
        console.log("Se ejecuta DeleteTipoEvento.");
      })
    }

    /*
      Funcion que es llamada cada vez que se agrega un evento al calendario
    */
    function AgregaEvento(nombre, fechainicia, color, callback){

      $.ajax({
        url: 'actionsCalendar.php',
        type: 'GET',
        dataType: 'json',
        data: "action=InsertEventoCalendario&nombre="+nombre+"&fechainicia="+fechainicia+"&color="+color,
        cache: false,
        success: callback
      })
      .done(function(response){
        return true;
      })
      .fail(function(jqXHR, estado){
        console.log("Ha ocurrido un error al insertar evento en calendario.");

      })
      .always(function(){
        console.log("Se ejecuta insertar evento en calendario.");
      })
    }

    

    /*
    Funcion que obtiene eventos y los carga en el calendario
    */
    function CargaEventosCalendario(){
      $.ajax({
        async: false,
        url:'actionsCalendar.php',
        type: 'GET',
        dataType: 'json',
        data:"action=SelectEventosCalendario",
        cache: false
      })
      .done(function(response){

        if (response.result == true) {  
          

          $(response.datos).each(function(i,v){

            var arreglo = new Array();
            if (v.todoeldia == 'S') {
              arreglo['allDay'] = true;
            }
            else{
              arreglo['allDay'] = false;
            }

            var inicia = moment();
            var finaliza = moment();

            arreglo['id'] = v.idevento;
            arreglo['title'] = v.nombre;
            arreglo['start'] = inicia.format(v.fecha_inicia);
            arreglo['end'] = finaliza.format(v.fecha_finaliza);
            arreglo['backgroundColor'] = v.color;
            arreglo['borderColor'] = v.color;

            eventos.push(arreglo);
          })
          

          return eventos;


        }else{
          alert(response.mensaje);
        }

      })
      .fail(function(jqXHR, estado){
        console.log("Ha ocurrido un error al consultar eventos para el calendario.");
      })

    }

    /*
      Funcion que actualiza datos del evento segun se arrastra en el calendario
    */
    function ActualizaEventoCalendarioDrop(idevento, todoeldia, fechainicia, fechafinaliza){

      $.ajax({
        url: 'actionsCalendar.php',
        type: 'GET',
        dataType: 'json',
        data: "action=UpdateEventoCalendario&idevento="+idevento+"&todoeldia="+todoeldia+"&fechainicia="+fechainicia+"&fechafinaliza="+fechafinaliza,
        cache:false
      })
      .done(function(response){
        return true;
      })
      .fail(function(jqXHR, estado){
        console.log("Ha ocurrido un error al actualizar evento.");
      })

    }

    /*
      Funcion que llama a la ventana de editar evento
    */
    function ModificaEvento(idevento){

      if (idevento > 0) {

        window.location.href = "http://localhost:8080/contingentes/Evento.html?idevento="+idevento;  

      }else{

        Alert("No es posible modificar evento.");

      }

    }
  </script> 
  
</body>

</html>